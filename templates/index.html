{% extends 'base.html' %}
{% block task_active %}active{% endblock task_active %}
{% block body %}
<div class="container bg-secondary-subtle rounded-2 mt-2" style="height: 88%;">
	<div class="row h-100 overflow-auto">
		<div class="col col-2 theme-color-1 rounded-start-2">
			<div class="container">
				<h3 class="mt-3 mb-4">Add Tasks</h3>
				<form action="/add" method="POST">
					<div class="mb-3">
						<!-- <label for="task" class="form-label">Task</label> -->
						<input type="text" class="form-control" name="task" id="task" placeholder="Task" value="just test" required>
					</div>
					<div class="mb-3">
						<!-- <label for="decs" class="form-label">Description</label> -->
						<input type="text" class="form-control" name="decs" id="decs" placeholder="Description" value="i have to reach home early today i have to reach home early today" required>
					</div>
					<div class="mb-3">
						<!-- <label for="dueDate" class="form-label">Due Date</label> -->
						<input type="date" class="form-control" name="dueDate" id="dueDate" placeholder="Due Date" required>
					</div>
					<button type="submit" class="btn btn-primary w-100">Add Task</button>
				</form>
			</div>
		</div>
		<div class="col">
			<div class="container">
				<h3 class="mt-3">Your Tasks</h3>
				{% if tasks|length == 0 %}
				<div class="alert alert-danger" role="alert">
					No Tasks Found. Please Add your first Task.
				</div>
				{% else %}
				<table class="table table-striped table-hover table-bordered">
					<thead class="table-primary">
						<tr>
							<th scope="col">SrNo</th>
							<th scope="col" style="width: 100px;">Task</th>
							<th scope="col">Desc</th>
							<th scope="col" style="width: 120px;">Date Created</th>
							<th scope="col" style="width: 100px;">Due Date</th>
							<th scope="col" style="width: 170px;">Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for task in tasks %}
						<tr class="">
							<th scope="row">{{loop.index}}</th>
							<td>{{task.task}}</td>
							<td>{{task.desc}}</td>
							<td>{{task.date_created}}</td>
							<td class="{{task.color}}">{{task.due_date}}</td>
							<td>
								<a href="/update/{{task.id}}"><button type="button"
										class="btn btn-outline-warning btn-sm">Update</button></a>
								<a href="/delete/{{task.id}}"><button type="button"
										class="btn btn-outline-success btn-sm">Completed</button></a>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
				{% endif %}

			</div>
		</div>
</div>
<script>
	const today = new Date();
	today.setDate(today.getDate() + 5);  // Adding 5 days to today's date

	const yyyy = today.getFullYear();
	const mm = String(today.getMonth() + 1).padStart(2, '0');  // January is 0!
	const dd = String(today.getDate()).padStart(2, '0');

	const formattedDate = `${yyyy}-${mm}-${dd}`;
	document.getElementById('dueDate').value = formattedDate;
</script>
{% endblock body %}